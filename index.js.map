{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\naxios.defaults.baseURL = 'https://pixabay.com';\n\nexport const photoRequest = (searchedQuery, currentPage) => {\n    return axios.get('/api/', {\n        params: {\n            key: '48247708-2116833e6be306042b2a4a912',\n            q: searchedQuery,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            maxWidth: 500,\n            page: currentPage,\n            per_page: 15,\n        }\n    });\n};","export const createImgTemplate = infoImg => {\n  return `\n    <li class=\"gallery-card\">\n      <a class=\"gallery-link\" href=\"${infoImg.largeImageURL}\">\n        <img class=\"gallery-img\" src=\"${infoImg.webformatURL}\" alt=\"${infoImg.tags.split(\",\").slice(0,3)}\" width=\"360\" height=\"250\" /></a>\n        <ul class=\"img-text-list\">\n          <li class=\"img-text-item\">Likes\n            <p class=\"img-text\">${infoImg.likes}</p>\n          </li>\n          <li class=\"img-text-item\">Views\n            <p class=\"img-text\">${infoImg.views}</p>\n          </li>\n          <li class=\"img-text-item\">Comments\n            <p class=\"img-text\">${infoImg.comments}</p>\n          </li>\n          <li class=\"img-text-item\">Downloads\n            <p class=\"img-text\">${infoImg.downloads}</p>\n          </li>\n        </ul>\n    </li>`;\n};","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { photoRequest } from \"./js/pixabay-api\";\n\nimport { createImgTemplate } from \"./js/render-functions\";\n\nconst searchForm = document.querySelector('.js-search-img-form');\nconst searchInput = document.querySelector('.js-search-img-input');\nconst galleryEl = document.querySelector('.js-gallery-list');\nconst loader = document.querySelector('.loader');\nconst loaderMoreImg = document.querySelector('.more-loader');\nconst moreImgBtn = document.querySelector('.js-more-img-btn');\n\niziToast.settings({\n  position: \"topRight\",\n  messageSize: '20',\n  messageColor: 'white',\n  backgroundColor: '#EF4040',\n  messageLineHeight: '25'\n});\n\nlet simpleLightBoxLibrary = new SimpleLightbox('.js-gallery-list a', {\n  captions: true,\n  captionSelector: 'img',\n  captionType: 'attr',\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n  captionHTML: true,\n  enableKeyboard: true,\n});\n\nlet currentPage = 1;\nlet perPage = 15;\nlet searchedQuery = '';\n\nconst onSearchFormSumbit = async event => {\n    try {\n        event.preventDefault();\n\n        moreImgBtn.style.display = 'none';\n\n        currentPage = 1;\n        perPage = 15;\n        \n        searchedQuery = searchInput.value.trim();\n\n        if (searchedQuery === '') {\n            iziToast.warning({\n                message: \"The field must be filled in.\",\n            })\n            searchForm.reset();\n            galleryEl.innerHTML = '';\n\n            return;\n        };\n\n        loader.style.display = 'block';\n        galleryEl.innerHTML = '';\n        \n        const {data} = await photoRequest(searchedQuery, currentPage);\n\n        loader.style.display = 'none';\n\n        if (data.total === 0) {\n            iziToast.warning({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                maxWidth: '432px',\n                class: 'toast-custom',\n            })\n            return;\n        };\n\n        const galleryTemplate = data.hits.map(el => createImgTemplate(el)).join('');\n        galleryEl.innerHTML = galleryTemplate;\n\n        if (data.totalHits > perPage) {\n            moreImgBtn.style.display = 'block';\n        };\n\n        simpleLightBoxLibrary.refresh();\n\n        return;\n    } catch (err) {\n        console.log(err);\n    };\n};\n\nconst loadMoreImgForm = async () => {\n    try {\n        moreImgBtn.style.display = 'none';\n        loaderMoreImg.style.display = 'block';\n\n        currentPage += 1;\n        perPage += 15;\n\n        const { data } = await photoRequest(searchedQuery, currentPage);\n\n        const galleryTemplate = data.hits.map(el => createImgTemplate(el)).join('');\n\n        loaderMoreImg.style.display = 'none';\n\n        galleryEl.insertAdjacentHTML('beforeend', galleryTemplate);\n\n        ScrollNextImgPage();\n\n        simpleLightBoxLibrary.refresh();\n\n        if (perPage >= data.totalHits) {\n            iziToast.warning({\n                message: \"We're sorry, but you've reached the end of search results.\"\n            });\n            return;\n        }\n        moreImgBtn.style.display = 'block';\n    } catch (err) {\n        console.log(err);\n    }\n};\n\nsearchForm.addEventListener('submit', onSearchFormSumbit);\nmoreImgBtn.addEventListener('click', loadMoreImgForm);\n\n\nconst ScrollNextImgPage = () => {\n    const galleryCard = galleryEl.firstElementChild;\n\n    if (galleryCard) {\n        const cardHeight = galleryCard.getBoundingClientRect().height;\n\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth'\n        });\n    }\n}"],"names":["axios","photoRequest","searchedQuery","currentPage","createImgTemplate","infoImg","searchForm","searchInput","galleryEl","loader","loaderMoreImg","moreImgBtn","iziToast","simpleLightBoxLibrary","SimpleLightbox","perPage","onSearchFormSumbit","event","data","galleryTemplate","el","err","loadMoreImgForm","ScrollNextImgPage","galleryCard","cardHeight"],"mappings":"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"}